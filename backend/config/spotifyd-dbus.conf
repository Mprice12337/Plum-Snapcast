<?xml version="1.0"?>
<!DOCTYPE busconfig PUBLIC "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
 "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">
<busconfig>
  <!-- Allow snapcast user to own spotifyd D-Bus services -->
  <policy user="snapcast">
    <!-- Allow spotifyd to own its internal service names -->
    <allow own_prefix="rs.spotifyd"/>

    <!-- Allow spotifyd to own MPRIS MediaPlayer2 interface -->
    <allow own="org.mpris.MediaPlayer2.spotifyd"/>
    <allow send_destination="org.mpris.MediaPlayer2.spotifyd"/>

    <!-- Allow sending to MPRIS interfaces -->
    <allow send_interface="org.mpris.MediaPlayer2"/>
    <allow send_interface="org.mpris.MediaPlayer2.Player"/>
    <allow send_interface="org.freedesktop.DBus.Properties"/>
  </policy>

  <!-- Allow root to communicate with spotifyd -->
  <policy user="root">
    <allow send_destination="org.mpris.MediaPlayer2.spotifyd"/>
    <allow send_interface="org.mpris.MediaPlayer2"/>
    <allow send_interface="org.mpris.MediaPlayer2.Player"/>
  </policy>

  <!-- Allow any user to receive signals from spotifyd MPRIS -->
  <policy context="default">
    <allow receive_sender="org.mpris.MediaPlayer2.spotifyd"/>
  </policy>
</busconfig>
