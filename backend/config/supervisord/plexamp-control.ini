# Plexamp Control Script - Monitors Plexamp timeline and sends updates to Snapcast
# Only runs when PLEXAMP_ENABLED=1
[program:plexamp-control]
command=/bin/sh -c 'if [ "${PLEXAMP_ENABLED}" = "1" ]; then sleep 10 && /usr/bin/python3 /app/scripts/plexamp-control-script.py; else sleep infinity; fi'
user=snapcast
directory=/app
environment=HOME="/app"
priority=60
autostart=true
autorestart=true
startsecs=5
startretries=3
stopasgroup=true
killasgroup=true
stdout_logfile=/var/log/supervisord/plexamp-control.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/supervisord/plexamp-control_err.log
stderr_logfile_maxbytes=10MB
