# gmrender Metadata Bridge - Monitors gmrender UPnP for metadata
# Queries gmrender's AVTransport service and writes metadata to JSON
[program:gmrender-metadata-bridge]
command=/bin/sh -c 'if [ "${DLNA_ENABLED}" = "1" ]; then sleep 10 && /usr/bin/python3 /app/scripts/gmrender-metadata-bridge.py; else sleep infinity; fi'
user=snapcast
directory=/app
environment=HOME="/app"
priority=55
autostart=true
autorestart=true
startsecs=10
startretries=3
stopasgroup=true
killasgroup=true
stdout_logfile=/var/log/supervisord/gmrender-metadata-bridge.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/var/log/supervisord/gmrender-metadata-bridge_err.log
stderr_logfile_maxbytes=10MB
